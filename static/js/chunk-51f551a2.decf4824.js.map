{"version":3,"sources":["webpack:///./src/assets/images/copy@2x.png","webpack:///./src/views/record/uploadToken.vue?ecf9","webpack:///./src/views/record/uploadToken.vue","webpack:///./src/views/record/uploadToken.vue?6a74"],"names":["module","exports","class","title","$t","loading","finished","immediate-check","finished-text","onLoad","list","item","index","key","name","token","data-clipboard-text","src","alt","desc","length","components","HeadTop","setup","store","t","data","address","state","accounts","web3","provider","balance","limit","page","initContract","UvStakeContract","eth","Contract","UvStakeAbi","config","uvStakeAddress","initData","getList","apollo","clients","uvStakeClient","query","variables","first","skip","user","toLowerCase","fetchPolicy","then","res","applyLists","arr","i","methods","getTokenInfo","call","tokenInfo","params","Object","assign","push","clipboard","on","e","clearSelection","val","refData","render","__scopeId"],"mappings":"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","file":"static/js/chunk-51f551a2.decf4824.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAhCAYAAABTERJSAAAAAXNSR0IArs4c6QAAAiFJREFUWEftmM9OE1EUxr/ToiLPgLhy6YrArQSNiQtegLWxzIRFh9QHgKU+AISpJp0KvoAPQOLC0sTesmQHK/5sYUcCyswhV1roMG25R+oYks5uknPu/c137vnuvUMQPKpSnGY+/5gBKQYeCVI7hhJwFoE10dCidlZqZDugAQGH3wE8tM0RxP0CZd9Yw0yWC1UieimYQBjK9srkAu+0WZqIs9HrRv7TpnC2RHhT7R8AMqZk1sqowOPmaIfa9Z/cFaSVrwLvAMCoeRfDELBfd/2n/YLJBd4eA2MDmJuKJpSR+Ed7mVRl4QuY88KSMYjWtbM6Z/JiMFL/iMEE3gmAESGMCT/Vrv84ASP1jz4oY/pmQ7urMwmYNv8AKJzVc5+/gdBq46uPbrX2P+2mNv+AdvxMJxBDlD6M63f1nU4wquKtgfGuy5o54ghTjXl/p9eaii/ga2eFlsLcsoCJeL7ulMrpwFQWvoL5bZfJjjnCi9SU+YuWTqT0rUwDmHvR2v+tTC2nNicyzmaf6/zK7l1h1FrxGYXhtjlB/jnpxRy4h89I9zA5KNesYaS7uxDm8nZgq4wZfCJ4/4r494cM0WTf7k3MDaYHS1vuclUEI/laFRQ2AZo2Ob22mfYxBzDdFI4r0+M8IynRpUkWfgKUE5UpftLjGe2UNqQT34xX5eI4KKwBGDb+UXf9YZsxKQ3/0G7J6o5OafiH+d1hpUwa/mEDYmIuANo7j6gStuF0AAAAAElFTkSuQmCC\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./uploadToken.vue?vue&type=style&index=0&id=301946f9&lang=less&scoped=true\"","<template>\n  <div class=\"container\">\n    <HeadTop :title=\"$t('index.上幣記錄')\"></HeadTop>\n    <div class=\"power\">\n      <van-list v-model:loading=\"loading\" :finished=\"finished\" :immediate-check=\"false\" :finished-text=\"$t('index.沒有更多了')\" @load=\"onLoad\">\n        <div class=\"ul\" v-for=\"(item,index) in list\" :key=\"index\">\n          <div class=\"row title\">\n            <div class=\"left\">{{$t('index.代幣：')}}{{item.name}}</div>\n            <div class=\"right succes\">{{$t('index.上幣成功')}}</div>\n          </div>\n          <div class=\"row\">\n            <div class=\"key\">{{$t('index.合約地址')}}</div>\n            <div class=\"value\"><span>{{item.token}}</span>&nbsp;&nbsp;<img class=\"copy clip-button\" :data-clipboard-text=\"item.token\" src=\"@/assets/images/copy@2x.png\" alt=\"\"></div>\n          </div>\n          <div class=\"row\">\n            <div class=\"key\">{{$t('index.項目詳情')}}</div>\n            <div class=\"value\">{{item.desc}}</div>\n          </div>\n        </div>\n        <div v-if=\"!list.length\" class=\"noDate\">{{$t('index.暫無更多數據')}}</div>\n      </van-list>\n    </div>\n  </div>\n</template>\n<script>\nimport HeadTop from '@/components/HeadTop'\nimport { reactive, toRefs, computed, watch, onMounted } from \"vue\";\nimport { useI18n } from \"vue-i18n\";\nimport { useStore } from \"vuex\";\nimport apolloProvider from '@/utils/apollo';\nimport gql from \"graphql-tag\";\nimport { Toast } from 'vant';\nimport Clipboard from 'clipboard'\nimport UvStakeAbi from \"@/utils/UvStakeAbi\";\nimport config from \"@/utils/config\";\nexport default {\n  components: {\n    HeadTop\n  },\n  setup () {\n    const store = useStore()\n    const { t } = useI18n()\n    const data = reactive({\n      $t: t,\n      address: computed(() => store.state.accounts[0]),\n      web3: computed(() => store.state.provider),\n      balance: 0,\n      loading: false,\n      finished: false,\n      limit: 6,\n      page: 1,\n      list: [],\n      initContract: () => {\n        data.UvStakeContract = new data.web3.eth.Contract(UvStakeAbi, config.uvStakeAddress)\n        data.initData()\n      },\n      initData: () => {\n        data.getList()\n      },\n      onLoad: async () => {\n        data.page = data.page + 1\n        await data.getList()\n      },\n      getList: () => {\n        data.loading = false\n        apolloProvider.clients.uvStakeClient.query({\n          query: gql`query applyLists($first: Int!, $skip: Int!,$user: Bytes!) {\n            applyLists(first: $first, skip: $skip, where: {user: $user}) {\n              id\n              time\n              user\n              token\n              name\n            }\n          }`,\n          variables: {\n            first: data.limit,\n            skip: (data.page - 1) * data.limit,\n            user: data.address.toLowerCase()\n          },\n          fetchPolicy: 'no-cache'\n        }).then(async (res) => {\n\n          let list = res.data.applyLists\n          if (list.length < data.limit) {\n            data.finished = true;\n          }\n          let arr = []\n          for (let i = 0; i < list.length; i++) {\n            let tokenInfo = await data.UvStakeContract.methods.getTokenInfo(list[i].token).call()\n            let params = Object.assign({}, tokenInfo, list[i])\n            arr.push(params)\n          }\n          data.list = [...data.list, ...arr]\n          data.loading = false\n        })\n      }\n    })\n    if (data.address) {\n      data.initContract()\n    }\n    onMounted(() => {\n      var clipboard = new Clipboard('.clip-button')\n      clipboard.on('success', function (e) {\n        Toast(t('share.複製成功'))\n        e.clearSelection()\n      })\n      clipboard.on('error', function () {\n        Toast(t('share.複製失敗，請手動長按複製'))\n      })\n    })\n    watch(() => data.address, (val) => {\n      if (val) {\n        data.initContract()\n      }\n    })\n    const refData = toRefs(data);\n    return {\n      ...refData\n    };\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.power {\n  padding: 16px;\n  .ul {\n    padding: 13px 16px;\n    background: #fff;\n    border-radius: 12px;\n    margin-bottom: 12px;\n    &:last-child {\n      margin-bottom: 0;\n    }\n  }\n  .row {\n    display: flex;\n    align-items: flex-start;\n    justify-content: space-between;\n    padding-bottom: 12px;\n    font-size: 14px;\n    &:last-child {\n      padding-bottom: 0;\n    }\n    &.title {\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      .left {\n        font-size: 16px;\n        color: @c3;\n      }\n      .value {\n        font-size: 14px;\n      }\n    }\n    .succes {\n      color: @theme-color;\n    }\n    .key {\n      color: @grey-color;\n      flex-shrink: 0;\n      word-break: break-all;\n      flex-wrap: wrap;\n      width: 74px;\n    }\n    .value {\n      color: @c3;\n      word-break: break-all;\n    }\n  }\n  .copy {\n    width: 17px;\n    vertical-align: middle;\n  }\n}\n</style>\n<style lang=\"less\">\n</style>\n","import { render } from \"./uploadToken.vue?vue&type=template&id=301946f9&scoped=true\"\nimport script from \"./uploadToken.vue?vue&type=script&lang=js\"\nexport * from \"./uploadToken.vue?vue&type=script&lang=js\"\n\nimport \"./uploadToken.vue?vue&type=style&index=0&id=301946f9&lang=less&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-301946f9\"\n\nexport default script"],"sourceRoot":""}