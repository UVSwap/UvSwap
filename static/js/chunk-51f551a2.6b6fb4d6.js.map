{"version":3,"sources":["webpack:///./src/assets/images/copy@2x.png","webpack:///./src/views/record/uploadToken.vue?ecf9","webpack:///./src/views/record/uploadToken.vue","webpack:///./src/views/record/uploadToken.vue?6a74"],"names":["module","exports","class","title","$t","loading","finished","immediate-check","finished-text","onLoad","list","item","index","key","name","token","data-clipboard-text","src","alt","desc","length","components","HeadTop","setup","store","t","data","address","state","accounts","web3","provider","balance","limit","page","initContract","UvStakeContract","eth","Contract","UvStakeAbi","config","uvStakeAddress","initData","getList","apollo","clients","uvStakeClient","query","variables","first","skip","user","toLowerCase","fetchPolicy","then","res","applyLists","arr","i","methods","getTokenInfo","call","tokenInfo","params","Object","assign","push","clipboard","on","e","clearSelection","val","refData","render","__scopeId"],"mappings":"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","file":"static/js/chunk-51f551a2.6b6fb4d6.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAhCAYAAABTERJSAAAAAXNSR0IArs4c6QAAAiFJREFUWEftmM9OE1EUxr/ToiLPgLhy6YrArQSNiQtegLWxzIRFh9QHgKU+AISpJp0KvoAPQOLC0sTesmQHK/5sYUcCyswhV1roMG25R+oYks5uknPu/c137vnuvUMQPKpSnGY+/5gBKQYeCVI7hhJwFoE10dCidlZqZDugAQGH3wE8tM0RxP0CZd9Yw0yWC1UieimYQBjK9srkAu+0WZqIs9HrRv7TpnC2RHhT7R8AMqZk1sqowOPmaIfa9Z/cFaSVrwLvAMCoeRfDELBfd/2n/YLJBd4eA2MDmJuKJpSR+Ed7mVRl4QuY88KSMYjWtbM6Z/JiMFL/iMEE3gmAESGMCT/Vrv84ASP1jz4oY/pmQ7urMwmYNv8AKJzVc5+/gdBq46uPbrX2P+2mNv+AdvxMJxBDlD6M63f1nU4wquKtgfGuy5o54ghTjXl/p9eaii/ga2eFlsLcsoCJeL7ulMrpwFQWvoL5bZfJjjnCi9SU+YuWTqT0rUwDmHvR2v+tTC2nNicyzmaf6/zK7l1h1FrxGYXhtjlB/jnpxRy4h89I9zA5KNesYaS7uxDm8nZgq4wZfCJ4/4r494cM0WTf7k3MDaYHS1vuclUEI/laFRQ2AZo2Ob22mfYxBzDdFI4r0+M8IynRpUkWfgKUE5UpftLjGe2UNqQT34xX5eI4KKwBGDb+UXf9YZsxKQ3/0G7J6o5OafiH+d1hpUwa/mEDYmIuANo7j6gStuF0AAAAAElFTkSuQmCC\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./uploadToken.vue?vue&type=style&index=0&id=301946f9&lang=less&scoped=true\"","<template>\r\n  <div class=\"container\">\r\n    <HeadTop :title=\"$t('index.上幣記錄')\"></HeadTop>\r\n    <div class=\"power\">\r\n      <van-list v-model:loading=\"loading\" :finished=\"finished\" :immediate-check=\"false\" :finished-text=\"$t('index.沒有更多了')\" @load=\"onLoad\">\r\n        <div class=\"ul\" v-for=\"(item,index) in list\" :key=\"index\">\r\n          <div class=\"row title\">\r\n            <div class=\"left\">{{$t('index.代幣：')}}{{item.name}}</div>\r\n            <div class=\"right succes\">{{$t('index.上幣成功')}}</div>\r\n          </div>\r\n          <div class=\"row\">\r\n            <div class=\"key\">{{$t('index.合約地址')}}</div>\r\n            <div class=\"value\"><span>{{item.token}}</span>&nbsp;&nbsp;<img class=\"copy clip-button\" :data-clipboard-text=\"item.token\" src=\"@/assets/images/copy@2x.png\" alt=\"\"></div>\r\n          </div>\r\n          <div class=\"row\">\r\n            <div class=\"key\">{{$t('index.項目詳情')}}</div>\r\n            <div class=\"value\">{{item.desc}}</div>\r\n          </div>\r\n        </div>\r\n        <div v-if=\"!list.length\" class=\"noDate\">{{$t('index.暫無更多數據')}}</div>\r\n      </van-list>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport HeadTop from '@/components/HeadTop'\r\nimport { reactive, toRefs, computed, watch, onMounted } from \"vue\";\r\nimport { useI18n } from \"vue-i18n\";\r\nimport { useStore } from \"vuex\";\r\nimport apolloProvider from '@/utils/apollo';\r\nimport gql from \"graphql-tag\";\r\nimport { Toast } from 'vant';\r\nimport Clipboard from 'clipboard'\r\nimport UvStakeAbi from \"@/utils/UvStakeAbi\";\r\nimport config from \"@/utils/config\";\r\nexport default {\r\n  components: {\r\n    HeadTop\r\n  },\r\n  setup () {\r\n    const store = useStore()\r\n    const { t } = useI18n()\r\n    const data = reactive({\r\n      $t: t,\r\n      address: computed(() => store.state.accounts[0]),\r\n      web3: computed(() => store.state.provider),\r\n      balance: 0,\r\n      loading: false,\r\n      finished: false,\r\n      limit: 6,\r\n      page: 1,\r\n      list: [],\r\n      initContract: () => {\r\n        data.UvStakeContract = new data.web3.eth.Contract(UvStakeAbi, config.uvStakeAddress)\r\n        data.initData()\r\n      },\r\n      initData: () => {\r\n        data.getList()\r\n      },\r\n      onLoad: async () => {\r\n        data.page = data.page + 1\r\n        await data.getList()\r\n      },\r\n      getList: () => {\r\n        data.loading = false\r\n        apolloProvider.clients.uvStakeClient.query({\r\n          query: gql`query applyLists($first: Int!, $skip: Int!,$user: Bytes!) {\r\n            applyLists(first: $first, skip: $skip, where: {user: $user}) {\r\n              id\r\n              time\r\n              user\r\n              token\r\n              name\r\n            }\r\n          }`,\r\n          variables: {\r\n            first: data.limit,\r\n            skip: (data.page - 1) * data.limit,\r\n            user: data.address.toLowerCase()\r\n          },\r\n          fetchPolicy: 'no-cache'\r\n        }).then(async (res) => {\r\n\r\n          let list = res.data.applyLists\r\n          if (list.length < data.limit) {\r\n            data.finished = true;\r\n          }\r\n          let arr = []\r\n          for (let i = 0; i < list.length; i++) {\r\n            let tokenInfo = await data.UvStakeContract.methods.getTokenInfo(list[i].token).call()\r\n            let params = Object.assign({}, tokenInfo, list[i])\r\n            arr.push(params)\r\n          }\r\n          data.list = [...data.list, ...arr]\r\n          data.loading = false\r\n        })\r\n      }\r\n    })\r\n    if (data.address) {\r\n      data.initContract()\r\n    }\r\n    onMounted(() => {\r\n      var clipboard = new Clipboard('.clip-button')\r\n      clipboard.on('success', function (e) {\r\n        Toast(t('share.複製成功'))\r\n        e.clearSelection()\r\n      })\r\n      clipboard.on('error', function () {\r\n        Toast(t('share.複製失敗，請手動長按複製'))\r\n      })\r\n    })\r\n    watch(() => data.address, (val) => {\r\n      if (val) {\r\n        data.initContract()\r\n      }\r\n    })\r\n    const refData = toRefs(data);\r\n    return {\r\n      ...refData\r\n    };\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.power {\r\n  padding: 16px;\r\n  .ul {\r\n    padding: 13px 16px;\r\n    background: #fff;\r\n    border-radius: 12px;\r\n    margin-bottom: 12px;\r\n    &:last-child {\r\n      margin-bottom: 0;\r\n    }\r\n  }\r\n  .row {\r\n    display: flex;\r\n    align-items: flex-start;\r\n    justify-content: space-between;\r\n    padding-bottom: 12px;\r\n    font-size: 14px;\r\n    &:last-child {\r\n      padding-bottom: 0;\r\n    }\r\n    &.title {\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: space-between;\r\n      .left {\r\n        font-size: 16px;\r\n        color: @c3;\r\n      }\r\n      .value {\r\n        font-size: 14px;\r\n      }\r\n    }\r\n    .succes {\r\n      color: @theme-color;\r\n    }\r\n    .key {\r\n      color: @grey-color;\r\n      flex-shrink: 0;\r\n      word-break: break-all;\r\n      flex-wrap: wrap;\r\n      width: 74px;\r\n    }\r\n    .value {\r\n      color: @c3;\r\n      word-break: break-all;\r\n    }\r\n  }\r\n  .copy {\r\n    width: 17px;\r\n    vertical-align: middle;\r\n  }\r\n}\r\n</style>\r\n<style lang=\"less\">\r\n</style>\r\n","import { render } from \"./uploadToken.vue?vue&type=template&id=301946f9&scoped=true\"\nimport script from \"./uploadToken.vue?vue&type=script&lang=js\"\nexport * from \"./uploadToken.vue?vue&type=script&lang=js\"\n\nimport \"./uploadToken.vue?vue&type=style&index=0&id=301946f9&lang=less&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-301946f9\"\n\nexport default script"],"sourceRoot":""}